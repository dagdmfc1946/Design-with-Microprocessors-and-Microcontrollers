<!DOCTYPE html>
<html>
<head>
    <title>Clasificacion de elementos</title>
</head>
    <link rel="icon" type="image/png" sizes="32x32" href="C:\Users\danie\Dropbox\Documentos\Universidad_Industrial_de_Santander\2023_1\MICROPROCESADORES\Programacion\.vscode\Parcial_9\Imagenes">
    <link rel="icon" type="image/png" sizes="16x16" href="C:\Users\danie\Dropbox\Documentos\Universidad_Industrial_de_Santander\2023_1\MICROPROCESADORES\Programacion\.vscode\Parcial_9\Imagenes">
<body>
     <h1 id= "title">Clasificacion de elementos</h1>
    <video id="video" playsinline autoplay style="width: 1px;"></video>
    <canvas id="canvas" width="400" height="400" style="max-width: 100%;"></canvas>
    <canvas id="otrocanvas" width="100" height="100"></canvas>

    <script src = "https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script>
    <script type="text/javascript">
    var tamano = 400;
        var video = document.getElementById("video");
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var currentStream = null;
        var facingMode = "user";    

        var modelo = null;
        //pendiente linea 22
        (async() => {
            console.log("Cargando modelo...")
            modelo = await tf.loadLayersModel("model.json")
            console.log("Modelo cargador");

        })();


        window.onload = function(){
            mostrarCamara();
        }

        function mostrarCamara() {
            var opciones = {
                audio: false,
                video: {
                    width: tamano, height: tamano
                }
            }

            if (navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia(opciones)
                    .then(function(stream) {
                        currentStream = stream;
                        video.srcObject = currentStream;
                        procesarCamara();

                    })
                    .catch(function(err) {
                        alert("No se pudo utilizar la camara :(");
                        console.log(err);
                        alert(err);
                    })
            } else {
                alert("No existe la funcion getUserMedia");
            }
        }   


        function procesarCamara() {
            ctx.drawImage(video, 0, 0, tamano, tamano, 0, 0, tamano, tamano);
            setTimeout(procesarCamara, 20);
        }

    </script>

</body>
</html>