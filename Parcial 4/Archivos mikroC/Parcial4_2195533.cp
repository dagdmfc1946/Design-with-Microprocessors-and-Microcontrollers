#line 1 "D:/INGENIERIA ELECTRONICA/11. Onceavo Semestre/Diseño con uP y uC/Parcial 4/Archivos mikroC/Parcial4_2195533.c"
#line 58 "D:/INGENIERIA ELECTRONICA/11. Onceavo Semestre/Diseño con uP y uC/Parcial 4/Archivos mikroC/Parcial4_2195533.c"
int i=0;
int temporal;

const unsigned int sen[] = {
0, 57, 114, 171, 229, 286, 342, 399, 456, 512, 569, 625, 681, 737, 793, 848, 903, 958, 1012,
1067, 1120, 1174, 1227, 1280, 1332, 1384, 1436, 1487, 1538, 1588, 1638, 1687, 1736, 1784, 1832,
1879, 1926, 1972, 2017, 2062, 2106, 2149, 2192, 2234, 2276, 2316, 2357, 2396, 2435, 2472, 2510,
2546, 2582, 2616, 2650, 2684, 2716, 2747, 2778, 2808, 2837, 2865, 2893, 2919, 2944, 2969, 2993,
3016, 3037, 3058, 3078, 3098, 3116, 3133, 3149, 3164, 3179, 3192, 3204, 3216, 3226, 3236, 3244,
3252, 3258, 3264, 3268, 3272, 3274, 3276, 3276, 3276, 3274, 3272, 3268, 3264, 3258, 3252, 3244,
3236, 3226, 3216, 3204, 3192, 3179, 3164, 3149, 3133, 3116, 3098, 3078, 3058, 3037, 3016, 2993,
2969, 2944, 2919, 2893, 2865, 2837, 2808, 2778, 2747, 2716, 2684, 2650, 2616, 2582, 2546, 2510,
2472, 2435, 2396, 2357, 2316, 2276, 2234, 2192, 2149, 2106, 2062, 2017, 1972, 1926, 1879, 1832,
1784, 1736, 1687, 1638, 1588, 1538, 1487, 1436, 1384, 1332, 1280, 1227, 1174, 1120, 1067, 1012,
958, 903, 848, 793, 737, 681, 625, 569, 512, 456, 399, 342, 286, 229, 171, 114, 57, 0, 57, 114,
171, 229, 286, 342, 399, 456, 512, 569, 625, 681, 737, 793, 848, 903, 958, 1012, 1067, 1120, 1174,
1227, 1280, 1332, 1384, 1436, 1487, 1538, 1588, 1638, 1687, 1736, 1784, 1832, 1879, 1926, 1972,
2017, 2062, 2106, 2149, 2192, 2234, 2276, 2316, 2357, 2396, 2435, 2472, 2510, 2546, 2582, 2616,
2650, 2684, 2716, 2747, 2778, 2808, 2837, 2865, 2893, 2919, 2944, 2969, 2993, 3016, 3037, 3058,
3078, 3098, 3116, 3133, 3149, 3164, 3179, 3192, 3204, 3216, 3226, 3236, 3244, 3252, 3258, 3264,
3268, 3272, 3274, 3276, 3276, 3276, 3274, 3272, 3268, 3264, 3258, 3252, 3244, 3236, 3226, 3216,
3204, 3192, 3179, 3164, 3149, 3133, 3116, 3098, 3078, 3058, 3037, 3016, 2993, 2969, 2944, 2919,
2893, 2865, 2837, 2808, 2778, 2747, 2716, 2684, 2650, 2616, 2582, 2546, 2510, 2472, 2435, 2396,
2357, 2316, 2276, 2234, 2192, 2149, 2106, 2062, 2017, 1972, 1926, 1879, 1832, 1784, 1736, 1687,
1638, 1588, 1538, 1487, 1436, 1384, 1332, 1280, 1227, 1174, 1120, 1067, 1012, 958, 903, 848, 793,
737, 681, 625, 569, 512, 456, 399, 342, 286, 229, 171, 114, 57, 0};

void InitMain(){
 TRISA.F0 = 0;
 TRISA.F1 = 0;
 TRISA.F4 = 0;
 TRISA.F5 = 0;
 LATA.F4 = 1;
 LATA.F5 = 1;
 SPI1_Init_Advanced(_SPI_MASTER_OSC_DIV4, _SPI_DATA_SAMPLE_MIDDLE, _SPI_CLK_IDLE_LOW, _SPI_LOW_2_HIGH);
}
void signal_sen(int values){
 char temporal;

 temporal = (values >> 8) & 0x0F;
 temporal |= 0x30;
 LATA.F5 = 0;
 SPI1_Write(temporal);


 temporal = values;
 SPI1_Write(temporal);
 LATA.F5 = 1;
 LATA.F4 = 0;
 LATA.F4 = 1;
}

void main(void){
 OSCCON = 0b11110011;
 InitMain();
 while(1){
 signal_sen(sen[i]);
 i++;
 if(i==360){i=0;}
 Delay_us(1);
 }
}
